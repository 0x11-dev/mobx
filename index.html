<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="description" content="mobservable : unobtrusive library to create reactive data structures and self-updating view functions">

  <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
  <link rel="shortcut icon" type="image/png" href="images/favicon.png"/>

  <title>mobservable</title>
</head>

<body>

  <!-- HEADER -->
  <div id="header_wrap" class="outer">
    <header class="inner">
      <a id="forkme_banner" href="https://github.com/mweststrate/mobservable">View on GitHub</a>

      <img src="images/mobservable.png" id="logo" />
      <h1 id="project_title">mobservable</h1>
      <h2 id="project_tagline">Keeps views automatically in sync with state. Unobtrusively.</h2>
    </header>
  </div>

  <div id="overview_content" class="outer">
    <div class="inner">
      <img src="images/overview.png" id="overview_img" class="overview_step1"/>
      <p style="color:#916f6f;font-size:0.8em;margin:-10px 0 0 0;padding-bottom:10px">(scroll down for a running demo)</p>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <div id="main_content_wrap" class="outer">
    <section id="main_content" class="inner">

      <table id="usps"><tr>
        <td><h4>seamlessly updating views</h4>
          Create view functions that update automatically, synchronously, atomically and efficiently. No stale or intermediate values will ever be visible.
          </td>
        <td><h4>reactive and unobtrusive data structures</h4>Work with reactive objects, classes and arrays as if they are plain javascript structures. Even if deeply nested or cyclic.</td>
      </tr><tr>
        <td><h4>reactjs decorator</h4>Turn reactjs components into reactive ones that automatically sideways load data for
          <a href="http://mendix.com/tech-blog/making-react-reactive-pursuit-high-performing-easily-maintainable-react-apps/" target="_blank">bleeding edge performance</a>.</td>
        <td><h4>shines in large apps</h4>Battle tested library that shines in large enterprise scale apps with complex data models.</td>
      </tr></table>

      <hr/>
      <h3><a id="start" class="anchor" href="#start" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting started</h3>

      <p>Take the <a href="getting-started.html">five minute, interactive introduction</a> to Mobservable and React.

      <h3><a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h3>

      <p>Install using <code>npm install mobservable --save</code> or <a href="https://raw.githubusercontent.com/mweststrate/mobservable/master/dist/mobservable.js">download</a> the stand-alone library. </p>

        <h3><a id="observable-data-structures" class="anchor" href="#observable-data-structures" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create reactive data structures</h3>

        <p>Use <em>mobservable.makeReactive</em> to create reactive primitives, arrays, objects and functions.
          Reactive functions re-evaluate automatically whenever relevant data changes, but only if they are used somewhere.
          Controller functions can still treat the data as if it are plain JavaScript objects.</p>

<!-- BEGIN CODE BLOCK 1 -->
<div class="highlight highlight-javascript"><pre><span class="pl-k">import</span> {makeReactive} <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>mobservable<span class="pl-pds">'</span></span>;

<span class="pl-c">// Create a reactive data structure</span>
<span class="pl-k">var</span> todoStore <span class="pl-k">=</span> <span style="color:red; font-weight:bold">makeReactive</span>({
    todos<span class="pl-k">:</span> [
        {
            title<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Find a clean mug<span class="pl-pds">'</span></span>,
            completed<span class="pl-k">:</span> <span class="pl-c1">true</span>
        },
        {
            title<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Make coffee<span class="pl-pds">'</span></span>,
            completed<span class="pl-k">:</span> <span class="pl-c1">false</span>
        }
    ],
    <span class="pl-en">completedCount</span><span class="pl-k">:</span> <span class="pl-k">function</span>() {
        <span class="pl-k">return</span> <span class="pl-v">this</span>.todos.filter((<span class="pl-smi">todo</span>)<span class="pl-k"> =&gt;</span> todo.completed).<span class="pl-c1">length</span>;
    },
    pending<span class="pl-k">:</span> <span class="pl-c1">0</span>
});

<span class="pl-c1">todoStore</span>.<span class="pl-en">addTodo</span> <span class="pl-k">=</span> <span class="pl-k">function</span>(<span class="pl-smi">title</span>) {
    <span class="pl-v">this</span>.todos.<span class="pl-c1">push</span>({
        title<span class="pl-k">:</span> title,
        completed<span class="pl-k">:</span> <span class="pl-c1">false</span>
    });
};

<span class="pl-c1">todoStore</span>.<span class="pl-en">removeTodo</span> <span class="pl-k">=</span> <span class="pl-k">function</span>(<span class="pl-smi">todo</span>) {
    <span class="pl-v">this</span>.todos.<span class="pl-c1">splice</span>(<span class="pl-v">this</span>.todos.<span class="pl-c1">indexOf</span>(todo), <span class="pl-c1">1</span>);
};

<span class="pl-k">export</span> <span class="pl-k">default</span> todoStore;</pre></div>
<!-- END CODE BLOCK 1 -->

        <h3><a id="observing-reactjs-components" class="anchor" href="#observing-reactjs-components" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create Reactjs components that automatically update</h3>

        <p>Use <em>mobservable.reactiveComponent</em> to create components that update themselves whenever reactive data they use changes.
          This process is highly efficient and only update that components that actually need a re-render.
          Since components update automatically, most of them can be stateless. You don't even need to state which data dependencies it has!
        </p>

<!-- Code block 2 -->
<div class="highlight highlight-javascript"><pre><span class="pl-k">import</span> React <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>react<span class="pl-pds">'</span></span>;
<span class="pl-k">import</span> todoStore <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>./todostore<span class="pl-pds">'</span></span>;
<span class="pl-k">import</span> {reactiveComponent} <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>mobservable<span class="pl-pds">'</span></span>;

<span class="pl-c">// React component that responds to changes in 'todos'</span>
<span class="pl-k">var</span> TodoList <span class="pl-k">=</span> <span style="color:red; font-weight:bold">reactiveComponent</span>(React.createClass({
    displayName<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>TodoList<span class="pl-pds">'</span></span>,

    <span class="pl-en">render</span><span class="pl-k">:</span> <span class="pl-k">function</span>() {
        <span class="pl-k">var</span> store <span class="pl-k">=</span> <span class="pl-v">this</span>.props.store;
        <span class="pl-k">return</span> (<span class="pl-k">&lt;</span>div<span class="pl-k">&gt;</span>
            <span class="pl-k">&lt;</span>ul<span class="pl-k">&gt;</span>
                { store.todos.map((<span class="pl-smi">todo</span>, <span class="pl-smi">idx</span>)<span class="pl-k"> =&gt;</span>
                    (<span class="pl-k">&lt;</span>TodoView store<span class="pl-k">=</span>{ store } todo<span class="pl-k">=</span>{ todo } key<span class="pl-k">=</span>{ idx } /<span class="pl-k">&gt;</span>)
                ) }
            <span class="pl-k">&lt;</span>/ul<span class="pl-k">&gt;</span>
            <span class="pl-k">&lt;</span>hr/<span class="pl-k">&gt;</span>
            Completed { store.completedCount } <span class="pl-k">of</span> { store.todos.<span class="pl-c1">length</span> } items.<span class="pl-k">&lt;</span>br/<span class="pl-k">&gt;</span>
            <span class="pl-k">&lt;</span>button onClick<span class="pl-k">=</span>{ <span class="pl-v">this</span>.onNewTodo }<span class="pl-k">&gt;</span>New Todo<span class="pl-k">&lt;</span>/button<span class="pl-k">&gt;</span>
        <span class="pl-k">&lt;</span>/div<span class="pl-k">&gt;</span>);
    },

    <span class="pl-en">onNewTodo</span><span class="pl-k">:</span> <span class="pl-k">function</span>() {
        <span class="pl-v">this</span>.props.store.addTodo(<span class="pl-c1">prompt</span>(<span class="pl-s"><span class="pl-pds">'</span>Enter a new todo:<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>Try mobservable at home!<span class="pl-pds">'</span></span>));
    }
}));

<span class="pl-c">// React component that responds to changes in its 'todo'</span>
<span class="pl-k">var</span> TodoView <span class="pl-k">=</span> <span style="color:red; font-weight:bold">reactiveComponent</span>(React.createClass({
    displayName<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>TodoView<span class="pl-pds">'</span></span>,

    <span class="pl-en">render</span><span class="pl-k">:</span> <span class="pl-k">function</span>() {
        <span class="pl-k">var</span> todo <span class="pl-k">=</span> <span class="pl-v">this</span>.props.todo;
        <span class="pl-k">return</span> (<span class="pl-k">&lt;</span>li<span class="pl-k">&gt;</span>
            <span class="pl-k">&lt;</span>input type<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>checkbox<span class="pl-pds">'</span></span> checked<span class="pl-k">=</span>{ todo.completed } <span class="pl-c1">onChange</span><span class="pl-k">=</span>{ <span class="pl-v">this</span>.onToggleCompleted } /<span class="pl-k">&gt;</span>
            {todo.<span class="pl-c1">title</span>}{<span class="pl-s"><span class="pl-pds">'</span> <span class="pl-pds">'</span></span>}
            <span class="pl-k">&lt;</span>a href<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>#<span class="pl-pds">'</span></span> onClick<span class="pl-k">=</span>{ <span class="pl-v">this</span>.onEdit }<span class="pl-k">&gt;</span>[edit]<span class="pl-k">&lt;</span>/a<span class="pl-k">&gt;</span>
            <span class="pl-k">&lt;</span>a href<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>#<span class="pl-pds">'</span></span> onClick<span class="pl-k">=</span>{ <span class="pl-v">this</span>.onRemove }<span class="pl-k">&gt;</span>[remove]<span class="pl-k">&lt;</span>/a<span class="pl-k">&gt;</span>
        <span class="pl-k">&lt;</span>/li<span class="pl-k">&gt;</span>);
    },

    <span class="pl-en">onToggleCompleted</span><span class="pl-k">:</span> <span class="pl-k">function</span>() {
        <span class="pl-v">this</span>.props.todo.completed <span class="pl-k">=</span> <span class="pl-k">!</span><span class="pl-v">this</span>.props.todo.completed;
    },

    <span class="pl-en">onEdit</span><span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">e</span>) {
        e.preventDefault();
        <span class="pl-v">this</span>.props.todo.<span class="pl-c1">title</span> <span class="pl-k">=</span> <span class="pl-c1">prompt</span>(<span class="pl-s"><span class="pl-pds">'</span>Todo:<span class="pl-pds">'</span></span>, <span class="pl-v">this</span>.props.todo.<span class="pl-c1">title</span>);
    },

    <span class="pl-en">onRemove</span><span class="pl-k">:</span> <span class="pl-k">function</span>(<span class="pl-smi">e</span>) {
        e.preventDefault();
        <span class="pl-v">this</span>.props.store.removeTodo(<span class="pl-v">this</span>.props.todo);
    }
}));

React.render(<span class="pl-k">&lt;</span>TodoList store<span class="pl-k">=</span>{todoStore} /<span class="pl-k">&gt;</span>, <span class="pl-c1">document</span>.<span class="pl-c1">getElementById</span>(<span class="pl-s"><span class="pl-pds">'</span>approot<span class="pl-pds">'</span></span>));
</pre></div>
<!-- Code block 2 END -->

          <h4><a id="demo" class="anchor" href="#demo" aria-hidden="true"><span class="octicon octicon-link"></span></a>Running demo</h4>
          <pre id="approot" class=""></pre>

          <p>The full project source of the todo demo can be found in the <a target="_blank" href="https://github.com/mweststrate/react-mobservable-boilerplate">react-mobservable-boilerplate</a> repository.</p>

          <h3><a id="async" class="anchor" href="#async" aria-hidden="true"><span class="octicon octicon-link"></span></a>Working with async stuff</h3>

          <p>Asynchronous stuff is easy to deal with in reactive programming.
            Just prepare reactive values and update them whenever the async function completes or fails.
            In the mean time make sure to present a friendly UI to your users!
            For example with the following adaptions to the snippets above the "Load more..." button was implemented:
          </p>
          <p>Changes to the store:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-c1">todoStore</span>.<span class="pl-en">loadTodosAsync</span> <span class="pl-k">=</span> <span class="pl-k">function</span>() {
    <span class="pl-v">this</span>.pending<span class="pl-k">++</span>;
    <span class="pl-c">// mimic something asynchronous</span>
    <span class="pl-c1">setTimeout</span>(<span class="pl-k">function</span>() {
        <span class="pl-v">this</span>.addTodo(<span class="pl-s"><span class="pl-pds">'</span>Asynchronously created todo<span class="pl-pds">'</span></span>);
        <span class="pl-v">this</span>.pending<span class="pl-k">--</span>;
    }.bind(<span class="pl-v">this</span>), <span class="pl-c1">2000</span>);
};</pre></div>

          <p>Changes to the TodoList component:

<div class="highlight highlight-javascript"><pre>
<span class="pl-en">render</span><span class="pl-k">:</span> <span class="pl-k">function</span>() {
    <span class="pl-k">var</span> store <span class="pl-k">=</span> <span class="pl-v">this</span>.props.store;
    <span class="pl-k">return</span> (<span class="pl-k">&lt;</span>div<span class="pl-k">&gt;</span>
        <span class="pl-k">&lt;</span>ul<span class="pl-k">&gt;</span>
            { <span class="pl-c">/** Omitted */</span> }
            { store.pending <span class="pl-k">?</span> (<span class="pl-k">&lt;</span>li<span class="pl-k">&gt;</span>Loading more items...<span class="pl-k">&lt;</span>/li<span class="pl-k">&gt;</span>) <span class="pl-k">:</span> <span class="pl-c1">null</span> }
        <span class="pl-k">&lt;</span>/ul<span class="pl-k">&gt;</span>
        { <span class="pl-c">/** Omitted */</span> }
        <span class="pl-k">&lt;</span>button onClick<span class="pl-k">=</span>{ <span class="pl-v">this</span>.loadMore }<span class="pl-k">&gt;</span>Load more...<span class="pl-k">&lt;</span>/button<span class="pl-k">&gt;</span>
    <span class="pl-k">&lt;</span>/div<span class="pl-k">&gt;</span>);
},

<span class="pl-en">loadMore</span><span class="pl-k">:</span> <span class="pl-k">function</span>() {
    <span class="pl-v">this</span>.props.store.loadTodosAsync();
}</pre></div>

          <h3><a id="runtimebehavior" class="anchor" href="#runtimebehavior" aria-hidden="true"><span class="octicon octicon-link"></span></a>Runtime behavior</h3>

          <p>Reactive values created using mobservable have the following characteristics:</p>
          <ul>
            <li>Synchronous: Updates are processed synchronously; after each update everything is still fresh.</li>
            <li>Atomic updates: All updates are processed atomically so that you can never observe a stale value, even when updates cascade.</li>
            <li>Real time dependency detection: Computed values only depend on values actually used in the last computation.</li>
            <li>Lazy: Computed values will only be evaluated if they are actually being observed.</li>
          </ul>

          <hr/>
          <h4 id="shout"></h4>

          <div style="text-align:center;">
            <a class="github-button" href="https://github.com/mweststrate/mobservable" data-icon="octicon-star" data-style="small" data-count-href="/mweststrate/mobservable/stargazers" data-count-api="/repos/mweststrate/mobservable#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star mweststrate/mobservable on GitHub">Star</a>
            <a href="https://twitter.com/share" class="twitter-share-button" data-via="mweststrate" data-hashtags="mobservable">Tweet</a>
          </div>
          <hr/>


          <h3><a id="more" class="anchor" href="#more" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dive deeper...</h3>
            <ul>
              <li>The <a target="_blank" href="https://www.mendix.com/tech-blog/making-react-reactive-pursuit-high-performing-easily-maintainable-react-apps/">design &amp; performance </a> of mobservable</li>
              <li>The <a target="_blank" href="https://medium.com/@mweststrate/pure-rendering-in-the-light-of-time-and-state-4b537d8d40b1">philosophy</a> behind mobservable</li>
              <li>The <a target="_blank" href="https://github.com/mweststrate/mobservable/blob/master/README.md">full documentation</a></li>
              <li>Get started with a <a target="_blank" href="https://jsfiddle.net/mweststrate/wgbe4guu/">small JSFiddle</a></li>
              <li>Get started by cloning the <a target="_blank" href="https://github.com/mweststrate/react-mobservable-boilerplate">react mobservable boilerplate project</a></li>
              <li><a target="_blank" href="https://github.com/mweststrate/todomvc/tree/master/examples/react-mobservable">TodoMVC using mobservable</a></li>
              <li>Review a more <a target="_blank" href="https://jsfiddle.net/mweststrate/46vL0phw">sophisticated example</a></li>
              <li>Discuss mobservable in the <a target="_blank" href="https://reactiflux.slack.com/messages/mobservable/">Reactiflux #mobservable</a> slack channel (<a target="_blank" href="http://www.reactiflux.com/">Sign up</a>)</li>
            </ul>

          </section>
        </div>

        <!-- FOOTER  -->
        <div id="footer_wrap" class="outer">
          <footer class="inner">

            <p class="copyright">mobservable maintained by <a href="https://github.com/mweststrate">mweststrate</a></p>
            <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
          </footer>
        </div>

        <script>
          (function() {
            var tagLines = [
              "cleanly separate views, actions and model data",
              "stop reasoning about which views need an update",
              "stop changing the UI in event handlers",
              "eliminate data subscriptions from your code",
              "write views as-if data will not change in the future",
//              "“express a lot of events just with observables... it's really funny.”",
//              "use stuff that is “pretty clever! Actually, the whole thing is really cool.”",
              "elegantly deal with asynchronous data fetching",
              "create views without explicitly stating data dependencies",
              "automatically and synchronously compute derived data"
            ];
            function shout() {
              document.getElementById("shout").innerHTML = "&ldquo;" + tagLines[Math.round(Math.random() * (tagLines.length -1))] + "&rdquo;";
            }
            setInterval(shout, 5000);
            shout();
          })();
        </script>
        <!-- webpack bundle of react-mobservable-boilerplate -->
        <script src="javascripts/bundle.js"></script>
        <script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
        </script>
        <script type="text/javascript">
        try {
          var pageTracker = _gat._getTracker("UA-65632006-1");
          pageTracker._trackPageview();
        } catch(err) {}
        </script>

        <script async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

      </body>
      </html>
