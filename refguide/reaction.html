<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>reaction · MobX</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# Reaction"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="reaction · MobX"/><meta property="og:type" content="website"/><meta property="og:url" content="https://mobx.js.org//index.html"/><meta property="og:description" content="# Reaction"/><meta property="og:image" content="https://mobx.js.org/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://mobx.js.org/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-65632006-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://codefund.app/properties/259/funder.js" async=""></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/mobx.png" alt="MobX"/><h2 class="headerTitleWithLogo">MobX</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/intro/concepts.html" target="_self">Documentation</a></li><li class=""><a href="https://github.com/mobxjs/mobx" target="_self">Github</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Reacting to observables</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul class=""><li class="navListItem"><a class="navItem" href="/README.html">One page summary</a></li><li class="navListItem"><a class="navItem" href="/intro/concepts.html">Concepts &amp; Principles</a></li><li class="navListItem"><a class="navItem" href="/intro/overview.html">The gist of MobX</a></li><li class="navListItem"><a class="navItem" href="/refguide/api.html">API overview</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Making things observable</h3><ul class=""><li class="navListItem"><a class="navItem" href="/refguide/observable.html">observable</a></li><li class="navListItem"><a class="navItem" href="/refguide/observable-decorator.html">@observable</a></li><li class="navListItem"><a class="navItem" href="/refguide/object.html">objects</a></li><li class="navListItem"><a class="navItem" href="/refguide/array.html">arrays</a></li><li class="navListItem"><a class="navItem" href="/refguide/map.html">maps</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Reacting to observables</h3><ul class=""><li class="navListItem"><a class="navItem" href="/refguide/observer-component.html">(@)observer components</a></li><li class="navListItem"><a class="navItem" href="/refguide/computed-decorator.html">(@)computed</a></li><li class="navListItem"><a class="navItem" href="/refguide/autorun.html">autorun</a></li><li class="navListItem"><a class="navItem" href="/refguide/when.html">when</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/refguide/reaction.html">reaction</a></li><li class="navListItem"><a class="navItem" href="/best/react.html">Understanding what MobX reacts to</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Updating observables</h3><ul class=""><li class="navListItem"><a class="navItem" href="/refguide/action.html">action</a></li><li class="navListItem"><a class="navItem" href="/best/actions.html">async actions &amp; flows</a></li><li class="navListItem"><a class="navItem" href="/refguide/object-api.html">Object api</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Utilities</h3><ul class=""><li class="navListItem"><a class="navItem" href="/refguide/boxed.html">boxed values</a></li><li class="navListItem"><a class="navItem" href="/refguide/modifiers.html">modifiers</a></li><li class="navListItem"><a class="navItem" href="/refguide/tojson.html">toJS</a></li><li class="navListItem"><a class="navItem" href="/refguide/inject.html">Provider / inject</a></li><li class="navListItem"><a class="navItem" href="/refguide/extend-observable.html">extendObservable</a></li><li class="navListItem"><a class="navItem" href="/refguide/extending.html">createAtom</a></li><li class="navListItem"><a class="navItem" href="/refguide/observe.html">intercept &amp; observe</a></li><li class="navListItem"><a class="navItem" href="/refguide/create-transformer.html">mobxUtils.createTransformer</a></li><li class="navListItem"><a class="navItem" href="/refguide/expr.html">mobxUtils.expr</a></li><li class="navListItem"><a class="navItem" href="/refguide/mobx-utils.html">MobX-utils</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Tips &amp; Tricks</h3><ul class=""><li class="navListItem"><a class="navItem" href="/faq/faq.html">Frequently Asked Questions</a></li><li class="navListItem"><a class="navItem" href="/best/pitfalls.html">Common Pitfalls &amp; Best Practices</a></li><li class="navListItem"><a class="navItem" href="/best/decorators.html">How to (not) use decorator syntax</a></li><li class="navListItem"><a class="navItem" href="/best/trace.html">Using trace for debugging</a></li><li class="navListItem"><a class="navItem" href="/best/store.html">Defining data stores</a></li><li class="navListItem"><a class="navItem" href="/best/react-performance.html">Optimizing React components</a></li><li class="navListItem"><a class="navItem" href="/refguide/spy.html">spy</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/mobxjs/mobx/edit/master/docs/refguide/reaction.md" target="_blank" rel="noreferrer noopener">Edit</a></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="reaction"></a><a href="#reaction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reaction</h1>
<div id='codefund' ></div>
<p>Usage: <code>reaction(() =&gt; data, (data, reaction) =&gt; { sideEffect }, options?)</code>.</p>
<p>A variation on <code>autorun</code> that gives more fine grained control on which observables will be tracked.
It takes two functions, the first one (the <em>data</em> function) is tracked and returns data that is used as input for the second one, the <em>effect</em> function.
Unlike <code>autorun</code> the side effect won't be run directly when created, but only after the data expression returns a new value for the first time.
Any observables that are accessed while executing the side effect will not be tracked.</p>
<p><code>reaction</code> returns a disposer function.</p>
<p>The second function (the <em>effect</em> function) passed to <code>reaction</code> will receive two arguments when invoked.
The first argument is the value returned by the <em>data</em> function. The second argument is the current reaction,
which can be used to dispose the <code>reaction</code> during execution.</p>
<p>It is important to notice that the side effect will <em>only</em> react to data that was <em>accessed</em> in the data expression, which might be less than the data that is actually used in the effect.
Also, the side effect will only be triggered when the data returned by the expression has changed.
In other words: reaction requires you to produce the things you need in your side effect.</p>
<h2><a class="anchor" aria-hidden="true" id="options"></a><a href="#options" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Options</h2>
<p>Reaction accepts a third argument as an options object with the following optional options:</p>
<ul>
<li><code>fireImmediately</code>: Boolean that indicates that the effect function should immediately be triggered after the first run of the data function. <code>false</code> by default.</li>
<li><code>delay</code>: Number in milliseconds that can be used to debounce the effect function. If zero (the default), no debouncing will happen.</li>
<li><code>equals</code>: <code>comparer.default</code> by default. If specified, this comparer function will be used to compare the previous and next values produced by the <em>data</em> function. The <em>effect</em> function will only be invoked if this function returns false. If specified, this will override <code>compareStructural</code>.</li>
<li><code>name</code>: String that is used as name for this reaction in for example <a href="/refguide/spy.html"><code>spy</code></a> events.</li>
<li><code>onError</code>: function that will handle the errors of this reaction, rather then propagating them.</li>
<li><code>scheduler</code>: Set a custom scheduler to determine how re-running the autorun function should be scheduled</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h2>
<p>In the following example both <code>reaction1</code>, <code>reaction2</code> and <code>autorun1</code> will react to the addition, removal or replacement of todo's in the <code>todos</code> array.
But only <code>reaction2</code> and <code>autorun</code> will react to the change of a <code>title</code> in one of the todo items, because <code>title</code> is used in the data expression of reaction 2, while it isn't in the data expression of reaction 1.
<code>autorun</code> tracks the complete side effect, hence it will always trigger correctly, but is also more suspectible to accidentally accessing unrelevant data.
See also <a href="../best/react">what will MobX React to?</a>.</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> todos = observable([
    {
        <span class="hljs-attr">title</span>: <span class="hljs-string">"Make coffee"</span>,
        <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span>
    },
    {
        <span class="hljs-attr">title</span>: <span class="hljs-string">"Find biscuit"</span>,
        <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span>
    }
])

<span class="hljs-comment">// wrong use of reaction: reacts to length changes, but not to title changes!</span>
<span class="hljs-keyword">const</span> reaction1 = reaction(
    <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> todos.length,
    length =&gt; <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"reaction 1:"</span>, todos.map(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.title).join(<span class="hljs-string">", "</span>))
)

<span class="hljs-comment">// correct use of reaction: reacts to length and title changes</span>
<span class="hljs-keyword">const</span> reaction2 = reaction(
    <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> todos.map(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.title),
    titles =&gt; <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"reaction 2:"</span>, titles.join(<span class="hljs-string">", "</span>))
)

<span class="hljs-comment">// autorun reacts to just everything that is used in its function</span>
<span class="hljs-keyword">const</span> autorun1 = autorun(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"autorun 1:"</span>, todos.map(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.title).join(<span class="hljs-string">", "</span>)))

todos.push({ <span class="hljs-attr">title</span>: <span class="hljs-string">"explain reactions"</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> })
<span class="hljs-comment">// prints:</span>
<span class="hljs-comment">// reaction 1: Make coffee, find biscuit, explain reactions</span>
<span class="hljs-comment">// reaction 2: Make coffee, find biscuit, explain reactions</span>
<span class="hljs-comment">// autorun 1: Make coffee, find biscuit, explain reactions</span>

todos[<span class="hljs-number">0</span>].title = <span class="hljs-string">"Make tea"</span>
<span class="hljs-comment">// prints:</span>
<span class="hljs-comment">// reaction 2: Make tea, find biscuit, explain reactions</span>
<span class="hljs-comment">// autorun 1: Make tea, find biscuit, explain reactions</span>
</code></pre>
<p>In the following example <code>reaction3</code>, will react to the change in the <code>counter</code> count.
When invoked <code>reaction</code>, second argument can use as disposer.
The following example shows a <code>reaction</code> that is invoked only once.</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> counter = observable({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> })

<span class="hljs-comment">// invoke once of and dispose reaction: reacts to observable value.</span>
<span class="hljs-keyword">const</span> reaction3 = reaction(
    <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> counter.count,
    (count, reaction) =&gt; {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"reaction 3: invoked. counter.count = "</span> + count)
        reaction.dispose()
    }
)

counter.count = <span class="hljs-number">1</span>
<span class="hljs-comment">// prints:</span>
<span class="hljs-comment">// reaction 3: invoked. counter.count = 1</span>

counter.count = <span class="hljs-number">2</span>
<span class="hljs-comment">// prints:</span>
<span class="hljs-comment">// (There are no logging, because of reaction disposed. But, counter continue reaction)</span>

<span class="hljs-built_in">console</span>.log(counter.count)
<span class="hljs-comment">// prints:</span>
<span class="hljs-comment">// 2</span>
</code></pre>
<p>Reaction is roughly speaking sugar for: <code>computed(expression).observe(action(sideEffect))</code> or <code>autorun(() =&gt; action(sideEffect)(expression))</code></p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/refguide/when.html"><span class="arrow-prev">← </span><span>when</span></a><a class="docs-next button" href="/best/react.html"><span class="function-name-prevnext">Understanding what MobX reacts to</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#options">Options</a></li><li><a href="#example">Example</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/mobx.png" alt="MobX" width="66" height="58"/></a><div><h5>Docs</h5><a href="/en/README">Why MobX</a><a href="/en/intro/concepts">Concepts</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/mobx" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://gitter.im/mobxjs/mobx">Project Chat</a></div><div><h5>More</h5><a class="github-button" href="https://github.com/mobxjs/mobx" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section></footer></div></body></html>