<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Modifiers · MobX</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# Modifiers"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Modifiers · MobX"/><meta property="og:type" content="website"/><meta property="og:url" content="https://mobx.js.org//index.html"/><meta property="og:description" content="# Modifiers"/><meta property="og:image" content="https://mobx.js.org/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://mobx.js.org/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-65632006-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://codefund.app/properties/259/funder.js" async=""></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/mobx.png" alt="MobX"/><h2 class="headerTitleWithLogo">MobX</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/intro/concepts.html" target="_self">Documentation</a></li><li class=""><a href="https://github.com/mobxjs/mobx" target="_self">Github</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Utilities</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul class=""><li class="navListItem"><a class="navItem" href="/README.html">One page summary</a></li><li class="navListItem"><a class="navItem" href="/intro/concepts.html">Concepts &amp; Principles</a></li><li class="navListItem"><a class="navItem" href="/intro/overview.html">The gist of MobX</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Making things observable</h3><ul class=""><li class="navListItem"><a class="navItem" href="/refguide/observable.html">observable</a></li><li class="navListItem"><a class="navItem" href="/refguide/observable-decorator.html">@observable</a></li><li class="navListItem"><a class="navItem" href="/refguide/object.html">objects</a></li><li class="navListItem"><a class="navItem" href="/refguide/array.html">arrays</a></li><li class="navListItem"><a class="navItem" href="/refguide/map.html">maps</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Reacting to observables</h3><ul class=""><li class="navListItem"><a class="navItem" href="/refguide/observer-component.html">(@)observer components</a></li><li class="navListItem"><a class="navItem" href="/refguide/computed-decorator.html">(@)computed</a></li><li class="navListItem"><a class="navItem" href="/refguide/autorun.html">autorun</a></li><li class="navListItem"><a class="navItem" href="/refguide/when.html">when</a></li><li class="navListItem"><a class="navItem" href="/refguide/reaction.html">reaction</a></li><li class="navListItem"><a class="navItem" href="/best/react.html">Understanding what MobX reacts to</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Updating observables</h3><ul class=""><li class="navListItem"><a class="navItem" href="/refguide/action.html">action</a></li><li class="navListItem"><a class="navItem" href="/best/actions.html">async actions &amp; flows</a></li><li class="navListItem"><a class="navItem" href="/refguide/object-api.html">Object api</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Utilities</h3><ul class=""><li class="navListItem"><a class="navItem" href="/refguide/api.html">API overview</a></li><li class="navListItem"><a class="navItem" href="/refguide/boxed.html">boxed values</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/refguide/modifiers.html">modifiers</a></li><li class="navListItem"><a class="navItem" href="/refguide/tojson.html">toJS</a></li><li class="navListItem"><a class="navItem" href="/refguide/inject.html">Provider / inject</a></li><li class="navListItem"><a class="navItem" href="/refguide/extend-observable.html">extendObservable</a></li><li class="navListItem"><a class="navItem" href="/refguide/extending.html">createAtom</a></li><li class="navListItem"><a class="navItem" href="/refguide/observe.html">intercept &amp; observe</a></li><li class="navListItem"><a class="navItem" href="/refguide/create-transformer.html">mobxUtils.createTransformer</a></li><li class="navListItem"><a class="navItem" href="/refguide/expr.html">mobxUtils.expr</a></li><li class="navListItem"><a class="navItem" href="/refguide/mobx-utils.html">MobX-utils</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Tips &amp; Tricks</h3><ul class=""><li class="navListItem"><a class="navItem" href="/faq/faq.html">Frequently Asked Questions</a></li><li class="navListItem"><a class="navItem" href="/best/pitfalls.html">Common Pitfalls &amp; Best Practices</a></li><li class="navListItem"><a class="navItem" href="/best/decorators.html">How to (not) use decorator syntax</a></li><li class="navListItem"><a class="navItem" href="/best/trace.html">Using trace for debugging</a></li><li class="navListItem"><a class="navItem" href="/best/store.html">Defining data stores</a></li><li class="navListItem"><a class="navItem" href="/best/react-performance.html">Optimizing React components</a></li><li class="navListItem"><a class="navItem" href="/refguide/spy.html">spy</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/mobxjs/mobx/edit/master/docs/refguide/modifiers.md" target="_blank" rel="noreferrer noopener">Edit</a></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="modifiers"></a><a href="#modifiers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Modifiers</h1>
<div id='codefund' ></div>
<p>In MobX there is a set of decorators that defines how observable properties will behave.</p>
<ul>
<li><code>observable</code>: An alias for <code>observable.deep</code>.</li>
<li><code>observable.deep</code>: This is the default modifier, used by any observable. It clones and converts any (not yet observable) array, Map or plain object into it's observable counterpart upon assignment to the given property</li>
<li><code>observable.ref</code>: Disables automatic observable conversion, just creates an observable reference instead.</li>
<li><code>observable.shallow</code>: Can only used in combination with collections. Turns any assigned collection into an observable, but the values of that collection will be treated as-is.</li>
<li><code>observable.struct</code>: Like <code>ref</code>, but will ignore new values that are structurally equal to the current value</li>
<li><code>computed</code>: Creates a derived property, see <a href="/refguide/computed-decorator.html"><code>computed</code></a></li>
<li><code>computed(options)</code>: Idem, sets additional options.</li>
<li><code>computed.struct</code>: Same as <code>computed</code>, but will only notify any of it's observers when the value produced by the view is <em>structurally</em> different from the previous value</li>
<li><code>action</code>: Creates an action, see <a href="/refguide/action.html"><code>action</code></a></li>
<li><code>action(name)</code>: Creates an action, overrides the name</li>
<li><code>action.bound</code>: Creates an action, and binds <code>this</code> to the instance</li>
</ul>
<p>Decorators can be used with the api's <code>decorate</code>, <code>observable.object</code>, <code>extendObservable</code> and <code>observable</code> (when creating objects) to specify how object members should behave.
If no decorators are passed in, the default behavior is to use <code>observable.deep</code> for any key / value pair, and <code>computed</code> for getters.</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">import</span> { observable, autorun, action } <span class="hljs-keyword">from</span> <span class="hljs-string">"mobx"</span>

<span class="hljs-keyword">var</span> person = observable(
    {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"John"</span>,
        <span class="hljs-attr">age</span>: <span class="hljs-number">42</span>,
        <span class="hljs-attr">showAge</span>: <span class="hljs-literal">false</span>,

        <span class="hljs-keyword">get</span> labelText() {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.showAge ? <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> (age: <span class="hljs-subst">${<span class="hljs-keyword">this</span>.age}</span>)`</span> : <span class="hljs-keyword">this</span>.name
        },

        <span class="hljs-comment">// action:</span>
        setAge(age) {
            <span class="hljs-keyword">this</span>.age = age
        }
    },
    {
        <span class="hljs-attr">setAge</span>: action
        <span class="hljs-comment">// the other properties will default to observables  / computed</span>
    }
)
</code></pre>
<pre><code class="hljs css language-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Person</span> </span>{
    name = <span class="hljs-string">"John"</span>
    age = <span class="hljs-number">42</span>
    showAge = <span class="hljs-literal">false</span>

    <span class="hljs-keyword">get</span> labelText() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.showAge ? <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">this</span>.name}</span> (age: <span class="hljs-subst">${<span class="hljs-keyword">this</span>.age}</span>)`</span> : <span class="hljs-keyword">this</span>.name
    }

    setAge(age) {
        <span class="hljs-keyword">this</span>.age = age
    }
}
<span class="hljs-comment">// when using decorate, all fields should be specified (a class might have many more non-observable internal fields after all)</span>
decorate(Person, {
    <span class="hljs-attr">name</span>: observable,
    <span class="hljs-attr">age</span>: observable,
    <span class="hljs-attr">showAge</span>: observable,
    <span class="hljs-attr">labelText</span>: computed,
    <span class="hljs-attr">setAge</span>: action
})
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="deep-observability"></a><a href="#deep-observability" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deep observability</h2>
<p>When MobX creates an observable object, (using <code>observable</code>, <code>observable.object</code>, or <code>extendObservable</code>), it introduces observable properties which
by default use the <code>deep</code> modifier. The deep modifier basically recursively calls <code>observable(newValue)</code> for any newly assigned value.
Which in turns uses the <code>deep</code> modifier... you get the idea.</p>
<p>This is a very convenient default. Without any additional effort all values assigned to an observable will themselves be made observable too (unless they already are), so no additional
effort is required to make objects deep observable.</p>
<h2><a class="anchor" aria-hidden="true" id="reference-observability"></a><a href="#reference-observability" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reference observability</h2>
<p>In some cases however, objects don't need to be converted into observables.
Typical cases are immutable objects, or objects that are not managed by you but by an external library.
Examples are JSX elements, DOM elements, native objects like History, window or etc.
To those kind of objects, you just want to store a reference without turning them into an observable.</p>
<p>For these situations there is the <code>ref</code> modifier. It makes sure that an observable property is created, which only tracks the reference but doesn't try to convert its value.
For example:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Message</span> </span>{
    @observable message = <span class="hljs-string">"Hello world"</span>

    <span class="hljs-comment">// fictional example, if author is immutable, we just need to store a reference and shouldn't turn it into a mutable, observable object</span>
    @observable.ref author = <span class="hljs-literal">null</span>
}
</code></pre>
<p>Or with just ES5 syntax:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Message</span>(<span class="hljs-params"></span>) </span>{
    extendObservable(
        <span class="hljs-keyword">this</span>,
        {
            <span class="hljs-attr">message</span>: <span class="hljs-string">"Hello world"</span>,
            <span class="hljs-attr">author</span>: <span class="hljs-literal">null</span>
        },
        {
            <span class="hljs-attr">author</span>: observable.ref
        }
    )
}
</code></pre>
<p>Note that an observable, boxed reference can be created by using <code>const box = observable.shallowBox(value)</code></p>
<h2><a class="anchor" aria-hidden="true" id="shallow-observability"></a><a href="#shallow-observability" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Shallow observability</h2>
<p>The <code>observable.shallow</code> modifier applies observability 'one-level-deep'. You need those if you want to create a <em>collection</em> of observable references.
If a new collection is assigned to a property with this modifier, it will be made observable, but its values will be left as is, so unlike <code>deep</code>, it won't recurse.
Example:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AuthorStore</span> </span>{
    @observable.shallow authors = []
}
</code></pre>
<p>In the above example an assignment of a plain array with authors to the <code>authors</code> will update the authors with an observable array, containing the original, non-observable authors.</p>
<p>Note that <code>{ deep: false }</code> can be passed as option to <code>observable</code>, <code>observable.object</code>, <code>observable.array</code>, <code>observable.map</code> and <code>extendObservable</code> to create shallow collections.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/refguide/boxed.html"><span class="arrow-prev">← </span><span>boxed values</span></a><a class="docs-next button" href="/refguide/tojson.html"><span class="function-name-prevnext">toJS</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#deep-observability">Deep observability</a></li><li><a href="#reference-observability">Reference observability</a></li><li><a href="#shallow-observability">Shallow observability</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/mobx.png" alt="MobX" width="66" height="58"/></a><div><h5>Docs</h5><a href="/en/README">Why MobX</a><a href="/en/intro/concepts">Concepts</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/mobx" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://gitter.im/mobxjs/mobx">Project Chat</a></div><div><h5>More</h5><a class="github-button" href="https://github.com/mobxjs/mobx" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section></footer></div></body></html>